(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{9570:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Satellite",function(){return i(4730)}])},5814:function(e,s,i){"use strict";i.r(s);var l=i(5271),t=i(1521),a=i(9768),n=i(9363);s.default=e=>{let{satellites:s,onSatelliteClick:i}=e,{scene:r,resourceManager:o,isInitialized:c}=(0,l.useContext)(n.SceneContext),d=(0,l.useRef)({meshes:[],satelliteIds:[],selectedIndex:null,highlightMeshes:new Map});return(0,l.useEffect)(()=>{if(!r||!o||!c||0===s.length){console.log("Satellite: 条件不满足，跳过加载",{scene:!!r,resourceManager:!!o,isInitialized:c,satellitesLength:s.length});return}console.log("Satellite: 开始加载卫星模型",{satellitesCount:s.length,satellites:s.map(e=>({id:e.id,name:e.name,position:e.position,model:e.model}))}),d.current.meshes.length>0&&(d.current.meshes.forEach(e=>{r.remove(e),e.traverse(e=>{e instanceof t.Kj0&&(e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose()))})}),d.current.highlightMeshes.forEach(e=>{r.remove(e),e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}));let e=[],l=s.map(e=>e.id);return s.forEach(s=>{let[l,n,o]=s.position;try{console.log("Satellite: 开始加载模型",s.model),new a.E().load(s.model,a=>{console.log("卫星加载成功:",s.id,s.model,{scene:a.scene,animations:a.animations,asset:a.asset,sceneChildren:a.scene.children.length});let c=a.scene;c.position.set(l,n,o);let d=1;switch(s.id){case"satellite-1":case"satellite-3":d=3;break;case"satellite-2":d=1;break;case"satellite-4":d=2.5;break;case"satellite-5":d=3.5;break;default:d=2}c.scale.set(d,d,d),c.name="satellite-".concat(s.id);let h=new t.ZzF().setFromObject(c);console.log("Satellite: 模型包围盒信息",JSON.stringify({satelliteId:s.id,scale:d,min:h.min,max:h.max,size:h.getSize(new t.Pa4),center:h.getCenter(new t.Pa4)})),c.userData={isClickable:!0,satelliteId:s.id,onSatelliteClick:i},c.traverse(e=>{e instanceof t.Kj0&&(e.userData={isClickable:!0,satelliteId:s.id,onSatelliteClick:i})});let m=new t.Ox3(16777215,1);m.position.set(5,5,5),m.target=c,r.add(m);let u=new t.Mig(4210752,.6);r.add(u),r.add(c),e.push(c),console.log("Satellite: 卫星已添加到场景",JSON.stringify({satelliteId:s.id,modelName:c.name,position:c.position,visible:c.visible,sceneChildren:r.children.length,lightsAdded:!0}))},e=>{},a=>{console.error("卫星加载失败，使用备用几何体:",s.id,s.model,a),console.error("错误详情:",{message:(null==a?void 0:a.message)||"未知错误",type:(null==a?void 0:a.type)||"未知类型",url:s.model});let c=new t.DvJ(1.5,.8,3),d=new t.xoR({color:4473924,shininess:100}),h=new t.Kj0(c,d);h.position.set(l,n,o),h.name="satellite-".concat(s.id,"-fallback"),h.userData={isClickable:!0,satelliteId:s.id,onSatelliteClick:i},r.add(h),e.push(h),console.log("Satellite: 备用几何体已添加到场景",{satelliteId:s.id,meshName:h.name,position:h.position,visible:h.visible,sceneChildren:r.children.length})})}catch(h){console.error("Satellite: GLTFLoader 创建失败",h);let a=new t.DvJ(1,.5,2),c=new t.xoR({color:4473924,shininess:100}),d=new t.Kj0(a,c);d.position.set(l,n,o),d.name="satellite-".concat(s.id,"-fallback"),d.userData={isClickable:!0,satelliteId:s.id,onSatelliteClick:i},r.add(d),e.push(d)}}),d.current.meshes=e,d.current.satelliteIds=l,()=>{d.current.meshes.forEach(e=>{r.remove(e),e.traverse(e=>{e instanceof t.Kj0&&(e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose()))})}),d.current.highlightMeshes.forEach(e=>{r.remove(e),e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),d.current={meshes:[],satelliteIds:[],selectedIndex:null,highlightMeshes:new Map}}},[r,o,c,s,i]),null}},5965:function(e,s,i){"use strict";i.r(s);var l=i(2676),t=i(5271),a=i(1521),n=i(9363),r=i(426),o=i(5814),c=i(5340);s.default=e=>{let{selectedSatellite:s}=e,{camera:i,controls:d,isInitialized:h,isLoaded:m}=(0,t.useContext)(n.SceneContext);return((0,t.useEffect)(()=>{i&&d&&(i.position.set(0,0,5),i.lookAt(0,0,0),d.update(),console.log("SatelliteScene: 相机位置设置完成",{position:i.position}))},[i,d]),(0,t.useEffect)(()=>{if(!i||!d||!s)return;let[e,l,t]=s.position,n=i.position.clone(),r=new a.Pa4(e+5,l+2,t+5),o=Date.now(),c=()=>{let s=Math.min((Date.now()-o)/1e3/1.5,1);i.position.lerpVectors(n,r,1-Math.pow(1-s,3)),i.lookAt(e,l,t),d.update(),s<1&&requestAnimationFrame(c)};c()},[s,i,d]),h)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.default,{}),(0,l.jsx)(r.default,{isRotating:!0,selectedSatellite:null==s?void 0:s.id}),!m&&(0,l.jsxs)("div",{className:"loading-container",children:[(0,l.jsx)("div",{className:"loading-spinner"}),(0,l.jsx)("p",{className:"loading-text",children:"正在加载地球模型..."})]}),s&&(0,l.jsx)(o.default,{satellites:[s],onSatelliteClick:()=>{}})]}):(0,l.jsxs)("div",{className:"loading-container",children:[(0,l.jsx)("div",{className:"loading-spinner"}),(0,l.jsx)("p",{className:"loading-text",children:"正在初始化3D场景..."})]})}},5340:function(e,s,i){"use strict";i.r(s);var l=i(5271),t=i(1521),a=i(9363);s.default=()=>{let{scene:e,isInitialized:s}=(0,l.useContext)(a.SceneContext),i=(0,l.useRef)({stars:null,animationId:null});return(0,l.useEffect)(()=>{if(!e||!s)return;let l=()=>{if(i.current.stars){let e=.001*Date.now(),s=i.current.stars.geometry.attributes.position.array;for(let i=0;i<s.length;i+=3){let l=.1*Math.sin(2*e+.1*i)+.9;s[i+1]+=.001*Math.sin(e+i)*l}i.current.stars.geometry.attributes.position.needsUpdate=!0}i.current.animationId=requestAnimationFrame(l)};return(()=>{let s=new t.u9r,l=new Float32Array(6e3),a=new Float32Array(6e3),n=new Float32Array(2e3);for(let e=0;e<2e3;e++){let s=3*e,i=50+50*Math.random(),r=Math.random()*Math.PI*2,o=Math.acos(2*Math.random()-1);l[s]=i*Math.sin(o)*Math.cos(r),l[s+1]=i*Math.sin(o)*Math.sin(r),l[s+2]=i*Math.cos(o);let c=new t.Ilk;c.setHSL(.6+.1*Math.random(),.8,.8+.2*Math.random()),a[s]=c.r,a[s+1]=c.g,a[s+2]=c.b,n[e]=2*Math.random()+.5}s.setAttribute("position",new t.TlE(l,3)),s.setAttribute("color",new t.TlE(a,3)),s.setAttribute("size",new t.TlE(n,1));let r=new t.jyz({vertexShader:"\n                    attribute float size;\n                    attribute vec3 color;\n                    varying vec3 vColor;\n                    void main() {\n                        vColor = color;\n                        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n                        gl_PointSize = size * (300.0 / -mvPosition.z);\n                        gl_Position = projectionMatrix * mvPosition;\n                    }\n                ",fragmentShader:"\n                    varying vec3 vColor;\n                    void main() {\n                        float distance = length(gl_PointCoord - vec2(0.5));\n                        if (distance > 0.5) discard;\n                        gl_FragColor = vec4(vColor, 1.0 - distance * 2.0);\n                    }\n                ",transparent:!0,depthWrite:!1,blending:t.WMw}),o=new t.woe(s,r);e.add(o),i.current.stars=o})(),l(),()=>{i.current.animationId&&cancelAnimationFrame(i.current.animationId),i.current.stars&&(e.remove(i.current.stars),i.current.stars.geometry.dispose(),i.current.stars.material.dispose())}},[e,s]),null}},4730:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return r}});var l=i(2676),t=i(5271),a=i(9363),n=i(5965);function r(){let[e,s]=(0,t.useState)(""),i=(0,t.useRef)(null),r=[{id:"satellite-1",name:"高分一号",model:"/models/satellite.glb",position:[0,0,0],description:"高分辨率光学遥感卫星，主要用于国土资源调查、环境监测等"},{id:"satellite-2",name:"高分二号",model:"/models/0.75m.glb",position:[0,0,0],description:"亚米级光学遥感卫星，具备高分辨率、宽覆盖能力"},{id:"satellite-3",name:"高分三号",model:"/models/base_satellite.glb",position:[0,0,0],description:"C波段合成孔径雷达卫星，全天候、全天时对地观测"},{id:"satellite-4",name:"北斗导航卫星",model:"/models/base_satellite_demo01.glb",position:[0,0,0],description:"中国北斗卫星导航系统的重要组成部分，提供全球定位服务"},{id:"satellite-5",name:"气象卫星",model:"/models/base_satellite_low.glb",position:[0,0,0],description:"气象观测卫星，用于天气预报和气候监测"}],c=e&&r.find(s=>s.id===e)||null;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"satellite-page",children:[(0,l.jsxs)("div",{className:"control-panel",children:[(0,l.jsxs)("div",{className:"panel-header",children:[(0,l.jsx)("h2",{children:"卫星3D展示系统"}),(0,l.jsx)("p",{className:"text-slate-300 text-sm mt-2",children:"基于 React Three Fiber 和 Three.js 的3D可视化技术展示"})]}),(0,l.jsxs)("div",{className:"satellite-list",children:[(0,l.jsxs)("div",{className:"satellite-list-header",children:[(0,l.jsx)("h3",{children:"卫星列表"}),e&&(0,l.jsx)("button",{className:"return-to-earth-btn",onClick:()=>s(""),children:"\uD83C\uDF0D 返回地球"})]}),r.map(i=>(0,l.jsxs)("div",{className:"satellite-item ".concat(e===i.id?"selected":""),onClick:()=>s(i.id),children:[(0,l.jsx)("div",{className:"satellite-icon",children:"\uD83D\uDEF0️"}),(0,l.jsxs)("div",{className:"satellite-info",children:[(0,l.jsx)("h4",{children:i.name}),(0,l.jsx)("p",{children:i.description})]})]},i.id))]}),c&&(0,l.jsx)(o,{satellite:c,onClose:()=>{}})]}),(0,l.jsx)("div",{className:"scene-container",ref:i,children:(0,l.jsx)(a.default,{containerRef:i,children:(0,l.jsx)(n.default,{selectedSatellite:c})})}),(0,l.jsxs)("div",{className:"skills-showcase",children:[(0,l.jsxs)("div",{className:"skill-card",children:[(0,l.jsx)("h3",{children:"Three.js"}),(0,l.jsx)("div",{className:"skill-level",children:(0,l.jsx)("div",{className:"skill-bar",style:{width:"85%"}})}),(0,l.jsx)("p",{children:"3D图形渲染技术"})]}),(0,l.jsxs)("div",{className:"skill-card",children:[(0,l.jsx)("h3",{children:"React Three Fiber"}),(0,l.jsx)("div",{className:"skill-level",children:(0,l.jsx)("div",{className:"skill-bar",style:{width:"80%"}})}),(0,l.jsx)("p",{children:"React 3D集成开发"})]}),(0,l.jsxs)("div",{className:"skill-card",children:[(0,l.jsx)("h3",{children:"TypeScript"}),(0,l.jsx)("div",{className:"skill-level",children:(0,l.jsx)("div",{className:"skill-bar",style:{width:"90%"}})}),(0,l.jsx)("p",{children:"类型安全开发"})]})]}),(0,l.jsx)("div",{className:"back-button",children:(0,l.jsx)("a",{href:"/",className:"back-link",children:"← 返回首页"})})]})})}function o(e){let{satellite:s,onClose:i}=e,t={"satellite-1":{type:"光学遥感卫星",launchDate:"2013-04-26",orbit:"太阳同步轨道",altitude:"645km",resolution:"2m全色/8m多光谱",lifespan:"8年",status:"在轨运行"},"satellite-2":{type:"光学遥感卫星",launchDate:"2014-08-19",orbit:"太阳同步轨道",altitude:"631km",resolution:"0.8m全色/3.2m多光谱",lifespan:"8年",status:"在轨运行"},"satellite-3":{type:"雷达遥感卫星",launchDate:"2016-08-10",orbit:"太阳同步轨道",altitude:"755km",resolution:"1m",lifespan:"8年",status:"在轨运行"}}[null==s?void 0:s.id]||{type:"未知",launchDate:"未知",orbit:"未知",altitude:"未知",resolution:"未知",lifespan:"未知",status:"未知"};return s?(0,l.jsxs)("div",{className:"satellite-info-panel",children:[(0,l.jsxs)("div",{className:"info-header",children:[(0,l.jsx)("h3",{children:s.name}),(0,l.jsx)("div",{className:"header-buttons",children:(0,l.jsx)("button",{onClick:i,className:"close-btn",children:"\xd7"})})]}),(0,l.jsxs)("div",{className:"info-content",children:[(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h4",{children:"基本信息"}),(0,l.jsxs)("div",{className:"info-grid",children:[(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"卫星ID:"}),(0,l.jsx)("span",{children:s.id})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"卫星类型:"}),(0,l.jsx)("span",{children:null==t?void 0:t.type})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"发射日期:"}),(0,l.jsx)("span",{children:null==t?void 0:t.launchDate})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"轨道类型:"}),(0,l.jsx)("span",{children:null==t?void 0:t.orbit})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"轨道高度:"}),(0,l.jsx)("span",{children:null==t?void 0:t.altitude})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"分辨率:"}),(0,l.jsx)("span",{children:null==t?void 0:t.resolution})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"设计寿命:"}),(0,l.jsx)("span",{children:null==t?void 0:t.lifespan})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"运行状态:"}),(0,l.jsx)("span",{className:"status-active",children:null==t?void 0:t.status})]})]})]}),(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h4",{children:"技术参数"}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"模型文件:"}),(0,l.jsx)("span",{className:"file-path",children:s.model})]}),(0,l.jsxs)("div",{className:"info-item",children:[(0,l.jsx)("label",{children:"当前位置:"}),(0,l.jsxs)("span",{children:["[",s.position.join(", "),"]"]})]})]}),(0,l.jsxs)("div",{className:"info-section",children:[(0,l.jsx)("h4",{children:"功能描述"}),(0,l.jsx)("p",{className:"description",children:s.description})]})]})]}):null}}},function(e){e.O(0,[593,944,577,768,426,774,888,179],function(){return e(e.s=9570)}),_N_E=e.O()}]);